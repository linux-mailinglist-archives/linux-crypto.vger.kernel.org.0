Return-Path: <linux-crypto-owner@vger.kernel.org>
X-Original-To: lists+linux-crypto@lfdr.de
Delivered-To: lists+linux-crypto@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id CCCB23CB338
	for <lists+linux-crypto@lfdr.de>; Fri, 16 Jul 2021 09:26:36 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S235441AbhGPH33 (ORCPT <rfc822;lists+linux-crypto@lfdr.de>);
        Fri, 16 Jul 2021 03:29:29 -0400
Received: from helcar.hmeau.com ([216.24.177.18]:51394 "EHLO deadmen.hmeau.com"
        rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
        id S231737AbhGPH32 (ORCPT <rfc822;linux-crypto@vger.kernel.org>);
        Fri, 16 Jul 2021 03:29:28 -0400
Received: from gondobar.mordor.me.apana.org.au ([192.168.128.4] helo=gondobar)
        by deadmen.hmeau.com with esmtp (Exim 4.92 #5 (Debian))
        id 1m4IEu-0004op-4f; Fri, 16 Jul 2021 15:26:28 +0800
Received: from herbert by gondobar with local (Exim 4.92)
        (envelope-from <herbert@gondor.apana.org.au>)
        id 1m4IEn-0001yK-8D; Fri, 16 Jul 2021 15:26:21 +0800
Date:   Fri, 16 Jul 2021 15:26:21 +0800
From:   Herbert Xu <herbert@gondor.apana.org.au>
To:     Julia Lawall <julia.lawall@inria.fr>
Cc:     Megha Dey <megha.dey@intel.com>,
        labuser <labuser@ssp-romleySNB-cdi172.jf.intel.com>,
        Tomasz Kantecki <tomasz.kantecki@intel.com>,
        linux-crypto@vger.kernel.org, kbuild-all@lists.01.org
Subject: Re: [PATCH] crypto: fix flexible_array.cocci warnings
Message-ID: <20210716072621.GA7555@gondor.apana.org.au>
References: <alpine.DEB.2.22.394.2106291346290.4909@hadrien>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <alpine.DEB.2.22.394.2106291346290.4909@hadrien>
User-Agent: Mutt/1.10.1 (2018-07-13)
Precedence: bulk
List-ID: <linux-crypto.vger.kernel.org>
X-Mailing-List: linux-crypto@vger.kernel.org

On Tue, Jun 29, 2021 at 01:48:01PM +0200, Julia Lawall wrote:
> From: kernel test robot <lkp@intel.com>
> 
> Zero-length and one-element arrays are deprecated, see
> Documentation/process/deprecated.rst
> Flexible-array members should be used instead.
> 
> Generated by: scripts/coccinelle/misc/flexible_array.cocci
> 
> Fixes: 7540b2861e52 ("crypto: aesni - AVX512 version of AESNI-GCM using VPCLMULQDQ")
> CC: Megha Dey <megha.dey@intel.com>
> Reported-by: kernel test robot <lkp@intel.com>
> Signed-off-by: kernel test robot <lkp@intel.com>
> Signed-off-by: Julia Lawall <julia.lawall@inria.fr>
> ---
> 
> tree:   https://github.com/meghadey/crypto for_crypto_avx512
> head:   a89c5880f0d6260dd593bf579df26f2a2d56ac32
> commit: 7540b2861e5292b5993f8e693fc69510b2a7277a [5/6] crypto: aesni - AVX512 version of AESNI-GCM using VPCLMULQDQ
> :::::: branch date: 7 hours ago
> :::::: commit date: 7 hours ago
> 
>  aesni-intel_glue.c |    2 +-
>  1 file changed, 1 insertion(+), 1 deletion(-)
> 
> --- a/arch/x86/crypto/aesni-intel_glue.c
> +++ b/arch/x86/crypto/aesni-intel_glue.c
> @@ -87,7 +87,7 @@ struct gcm_context_data {
>  	u64 partial_block_len;
>  	u64 unused;
>  	/* Allocate space for hash_keys later */
> -	u8 hash_keys[0];
> +	u8 hash_keys[];

Unfortunately this patch doesn't apply to the current crypto tree.
But the good news is that the current tree no longer has a zero-
length array in that struct.

Thanks,
-- 
Email: Herbert Xu <herbert@gondor.apana.org.au>
Home Page: http://gondor.apana.org.au/~herbert/
PGP Key: http://gondor.apana.org.au/~herbert/pubkey.txt
